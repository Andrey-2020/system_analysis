openapi: 3.0.0
info:
  title: 'Internship system'
  version: 1.0.0
paths:
  /api/users/:
    get:
      summary: Получение списка пользователей
      operationId: Список пользователей
      description: Выдача всех пользователей для отображения на странице поиска
      parameters:
        - name: page
          required: false
          in: query
          description: Номер страницы.
          schema:
            type: integer
        - name: limit
          required: false
          in: query
          description: Количество объектов на странице.
          schema:
            type: integer
      security:
        - Token: [ ]
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: 'Общее количество объектов в базе'
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://internship.example.org/api/users/?page=4
                    description: 'Ссылка на следующую страницу'
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://internship.example.org/api/users/?page=2
                    description: 'Ссылка на предыдущую страницу'
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserSearch'
                    description: 'Список объектов текущей страницы'
          description: Список пользователей
      tags:
        - Пользователи
    post:
      summary: Регистрация кандидата в системе 
      operationId: Регистрация пользователя
      description: Администратор регистрирует кандидата в системе 
      parameters: []
      security:
        - Token: [ ]
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomUserCreate'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomUserResponseOnCreate'
          description: 'Пользователь успешно создан'
        '400':
          $ref: '#/components/responses/ValidationError'
      tags:
        - Пользователи
  /api/users/me/:
    get:
      summary: Текущий пользователь
      operationId: Текущий пользователь
      description: Получение профиля текущего пользователя для отображения на странице
      parameters: []
      security:
        - Token: [ ]
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Пользователи
  /api/users/{id}/:
    get:
      summary: Получение профиля
      operationId: Профиль пользователя
      description: 'Получение профиля пользователя по id. Доступно только авторизованным пользователям'
      security:
        - Token: [ ]
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный id этого пользователя"
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Пользователи

  /api/users/{id}/role/:
    post:
      summary: Добавить пользователю роль
      operationId: Роль
      description: 'Доступно только руководителю стажировки и администратору. Администратор назначает руководителя стажировки. Руководитель стажировки назначает стажеров и менторов на свою стажировку'
      security:
        - Token: [ ]
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого пользователя."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                internship_id:
                  type: integer
                role:
                  type: string
                  description: "Роль пользователя"
                  example: "Стажер"
                  enum: ["Стажер", "Ментор", "Руководитель стажировки", "Администратор"]
              required:
                - username
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: 'Подписка успешно создана'
        '400':
          description: 'Ошибка назначения роли (Например, если роль уже назначена)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SelfMadeError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Управление стажерами и менторами

  /api/users/{id}/matching/:
    post:
      summary: Назначить стажера под конкретного ментора
      operationId: Назначить стажеру ментора
      description: 'Доступно только руководителю стажировки'
      security:
        - Token: [ ]
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор стажера."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InternWithMentor'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Intern'
          description: 'Подписка успешно создана'
        '400':
          description: 'Ошибка назначения ментора (Например, если стажеру для данной стажировки уже назначен ментор)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SelfMadeError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Управление стажерами и менторами

  /api/announcements/projects/:
    get:
      summary: Все шаблоны лендингов
      operationId: Конструктор
      description: Получить шаблоны лендингов
      security:
        - Token:
          - admin
        - Token: [ ]
      parameters:
        - name: addnewpage
          required: false
          in: query
          description: Создать новую страницу?
          schema:
            type: boolean
        - name: page
          required: false
          in: query
          description: Номер страницы.
          schema:
            type: integer
        - name: limit
          required: false
          in: query
          description: Количество объектов на странице.
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Templates'
          description: Все шаблоны страницы
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Анонсы
  /api/announcements/projects/{projectid}/:
    get:
      summary: Получить шаблон страницы
      operationId: Шаблон проекта
      description: Получить шаблоны проекта
      security:
        - Token:
          - admin
        - Token: [ ]
      parameters:
        - name: projectid
          in: path
          required: true
          description: "Уникальный индентификатор проекта"
          schema:
            type: integer
        - name: addnewpage
          required: false
          in: query
          description: Создать новую страницу?
          schema:
            type: boolean
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Template'
          description: Сообщение содержит HTML-разметку, а также необходимые библиотеки CSS-стилей и библиотеки JS-модулей.
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Анонсы
    post:
      summary: "Создать лендинг"
      operationId: Создать анонс стажировки
      description: "Создать анонс стажировки в конструкторе"
      security:
        - Token:
          - admin
      parameters:
        - name: projectid
          in: path
          required: true
          description: "Уникальный индентификатор проекта"
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnnouncementsCreate'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AnnouncementsResponseOnCreate'
          description: 'Анонс о стажировке успешно создан'
        '400':
          $ref: '#/components/responses/AnnouncementsValidationError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Анонсы
  /api/announcements/{id}/:
    get:
      summary: Получение страницы анонса стажировки
      operationId: Получение лендинга
      description: Получение страницы анонса стажировки для отправки завки
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор анонса"
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Template'
          description: ''
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Анонсы
    post:
      summary: "Отправка заявки на стажировку"
      operationId: Отклик
      description: "Отклик на стажировку путем заполнения и отправки формы на сайте"
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор анонса"
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: '#/components/schemas/Candidate'
                - $ref: '#/components/schemas/IntroductoryTasks'
      responses:
        '201':
          content:
            application/json:
              schema:
                type: object
                properties:
                  username:
                    type: string
                    description: "Уникальный юзернейм"
                    pattern: ^[\w.@+-]+\z
                    maxLength: 150
                    example: "79000000000"
                  message:
                    type: string
                    description: "Уведомление"
                    example: "Ваш отклик успешно зарегистрирован"
          description: 'Отклик успешно отправлен'
        '400':
          $ref: '#/components/responses/ValidationError'
        '409':
          $ref: '#/components/responses/ConflictError'
      tags:
        - Анонсы

  /api/lectures/:
    get:
      security:
        - Token: []
      operationId: Список лекций
      description: Страница доступна всем авторизированным пользователям.
      parameters:
        - name: page
          required: false
          in: query
          description: Номер страницы.
          schema:
            type: integer
        - name: limit
          required: false
          in: query
          description: Количество объектов на странице.
          schema:
            type: integer
        - name: is_favorited
          required: false
          in: query
          description: Показывать только рецепты, находящиеся в списке избранного.
          schema:
            type: integer
            enum: [0, 1]
        - name: is_in_shopping_cart
          required: false
          in: query
          description: Показывать только рецепты, находящиеся в списке покупок.
          schema:
            type: integer
            enum: [0, 1]
        - name: author
          required: false
          in: query
          description: Показывать рецепты только автора с указанным id.
          schema:
            type: integer
        - name: tags
          required: false
          in: query
          description: Показывать рецепты только с указанными тегами (по slug)
          example: 'lunch&tags=breakfast'

          schema:
            type: array
            items:
              type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: 'Общее количество объектов в базе'
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://foodgram.example.org/api/recipes/?page=4
                    description: 'Ссылка на следующую страницу'
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://foodgram.example.org/api/recipes/?page=2
                    description: 'Ссылка на предыдущую страницу'
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/RecipeList'
                    description: 'Список объектов текущей страницы'
          description: ''
      tags:
        - Лекции
    post:
      security:
        - Token: []
      operationId: Создание лекции
      description: 'Доступно только руководителю стажировки'
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RecipeCreateUpdate'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeList'
          description: 'Рецепт успешно создан'
        '400':
          description: 'Ошибки валидации в стандартном формате DRF'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '401':
          $ref: '#/components/schemas/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Лекции
  /api/lectures/{id}/:
    get:
      operationId: Получение лекции
      description: ''
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор лекции"
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeList'
          description: ''
      tags:
        - Лекции
    patch:
      operationId: Обновление лекции
      security:
        - Token: [ ]
      description: 'Добавление материалов лекции. Доступно только руководителю стажировки и ментору'
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого рецепта."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RecipeCreateUpdate'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeList'
          description: 'Лекция успешно обновлена'
        '400':
          $ref: '#/components/responses/NestedValidationError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Лекции
    delete:
      operationId: Удаление лекции

      description: 'Доступно только руководителю стажировки'
      security:
        - Token: [ ]
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого рецепта"
          schema:
            type: string
      responses:
        '204':
          description: 'Рецепт успешно удален'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Лекции

  /api/homeworks/:
    get:
      security:
        - Token: [ ]
      operationId: Скачать список покупок
      description: 'Скачать файл со списком покупок. Это может быть TXT/PDF/CSV. Важно, чтобы контент файла удовлетворял требованиям задания. Доступно только авторизованным пользователям.'
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/pdf:
              schema:
                type: string
                format: binary
            text/plain:
              schema:
                type: string
                format: binary
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Домашние задания
    post:
      operationId: Добавить рецепт в список покупок
      description: 'Доступно только авторизованным пользователям'
      security:
        - Token: [ ]
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого рецепта."
          schema:
            type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeMinified'
          description: 'Рецепт успешно добавлен в список покупок'
        '400':
          description: 'Ошибка добавления в список покупок (Например, когда рецепт уже есть в списке покупок)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SelfMadeError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Домашние задания
  /api/homeworks/{id}/:
    get:
      security:
        - Token: [ ]
      operationId: Скачать список покупок
      description: 'Скачать файл со списком покупок. Это может быть TXT/PDF/CSV. Важно, чтобы контент файла удовлетворял требованиям задания. Доступно только авторизованным пользователям.'
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/pdf:
              schema:
                type: string
                format: binary
            text/plain:
              schema:
                type: string
                format: binary
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Домашние задания
  /api/homeworks/{id}/decisions/:
    get:
      security:
        - Token: [ ]
      operationId: Скачать список покупок
      description: 'Скачать файл со списком покупок. Это может быть TXT/PDF/CSV. Важно, чтобы контент файла удовлетворял требованиям задания. Доступно только авторизованным пользователям.'
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/pdf:
              schema:
                type: string
                format: binary
            text/plain:
              schema:
                type: string
                format: binary
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Домашние задания
    post:
      operationId: Добавить рецепт в список покупок
      description: 'Доступно только авторизованным пользователям'
      security:
        - Token: [ ]
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого рецепта."
          schema:
            type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeMinified'
          description: 'Рецепт успешно добавлен в список покупок'
        '400':
          description: 'Ошибка добавления в список покупок (Например, когда рецепт уже есть в списке покупок)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SelfMadeError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Домашние задания
  /api/homeworks/{id}/decisions/{id}/:
    patch:
      operationId: Обновление лекции
      security:
        - Token: [ ]
      description: 'Добавление материалов лекции. Доступно только руководителю стажировки и ментору'
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого рецепта."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RecipeCreateUpdate'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeList'
          description: 'Лекция успешно обновлена'
        '400':
          $ref: '#/components/responses/NestedValidationError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Домашние задания

  /api/liga-security/:
    get:
      security:
        - Token: [ ]
      summary: Запросить статусы кандидатов
      operationId: Запросить статусы пользователей
      description: 'Скачать файл со списком покупок. Это может быть TXT/PDF/CSV. Важно, чтобы контент файла удовлетворял требованиям задания. Доступно только авторизованным пользователям.'
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/pdf:
              schema:
                type: string
                format: binary
            text/plain:
              schema:
                type: string
                format: binary
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Служба безопасности
    post:
      summary: Отправить кандидата в кафку СБ
      operationId: Отправить кандидата в кафку СБ
      description: 'Доступно только авторизованному пользователю.'
      security:
        - Token: [ ]
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого рецепта"
          schema:
            type: string
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeMinified'
          description: 'Рецепт успешно добавлен в избранное'
        '400':
          description: 'Ошибка добавления в избранное (Например, когда рецепт уже есть в избранном)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SelfMadeError'
        '401':
          $ref: '#/components/responses/AuthenticationError'

      tags:
        - Служба безопасности

  /api/hr/employees:
    post:
      summary: Отправить информацию о стажере в HR
      operationId: Подписаться на пользователя
      description: 'Доступно только авторизованным пользователям'
      security:
        - Token: [ ]
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого пользователя."
          schema:
            type: string
        - name: recipes_limit
          required: false
          in: query
          description: Количество объектов внутри поля recipes.
          schema:
            type: integer
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserWithRecipes'
          description: 'Подписка успешно создана'
        '400':
          description: 'Ошибка подписки (Например, если уже подписан или при подписке на себя самого)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SelfMadeError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - HR


  /api/programs/:
    post:
      summary: Создание программы стажировки
      operationId: Подписаться на пользователя
      description: 'Доступно только авторизованным пользователям'
      security:
        - Token: [ ]
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого пользователя."
          schema:
            type: string
        - name: recipes_limit
          required: false
          in: query
          description: Количество объектов внутри поля recipes.
          schema:
            type: integer
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserWithRecipes'
          description: 'Подписка успешно создана'
        '400':
          description: 'Ошибка подписки (Например, если уже подписан или при подписке на себя самого)'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SelfMadeError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Управление программами стажировок
  /api/programs/{id}/:
    get:
      security:
        - Token: [ ]
      summary: Просмотр программы стажировки
      operationId: Запросить статусы пользователей
      description: 'Скачать файл со списком покупок. Это может быть TXT/PDF/CSV. Важно, чтобы контент файла удовлетворял требованиям задания. Доступно только авторизованным пользователям.'
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/pdf:
              schema:
                type: string
                format: binary
            text/plain:
              schema:
                type: string
                format: binary
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Управление программами стажировок
    patch:
      summary: Обновление программы стажировки
      operationId: Обновление лекции
      security:
        - Token: [ ]
      description: 'Добавление материалов лекции. Доступно только руководителю стажировки и ментору'
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого рецепта."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RecipeCreateUpdate'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecipeList'
          description: 'Лекция успешно обновлена'
        '400':
          $ref: '#/components/responses/NestedValidationError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'

      tags:
        - Управление программами стажировок
  /api/users/set_password/:
    post:
      operationId: Изменение пароля
      description: 'Изменение пароля текущего пользователя'
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetPassword'
      responses:
        '204':
          description: 'Пароль успешно изменен'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Пользователи
  /api/auth/token/login/:
    post:
      operationId: Получить токен авторизации
      description: Используется для авторизации по емейлу и паролю, чтобы далее использовать токен при запросах.
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenCreate'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenGetResponse'
          description: ''
      tags:
        - Пользователи
  /api/auth/token/logout/:
    post:
      operationId: Удаление токена
      description: Удаляет токен текущего пользователя
      parameters: []
      requestBody:
        content:
          application/json:
            schema: {}

      responses:
        '204':
          content:
            application/json:
              schema: {}
          description: ''
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Пользователи
components:
  schemas:
    Candidate:
      description:  'Полные данные стажера'
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        username:
          type: string
          description: "Уникальный юзернейм в виде номера телефона"
          pattern: ^(7+([0-9]){10})$
          maxLength: 15
        first_name:
          type: string
          maxLength: 150
          description: "Имя"
          example: "Вася"
        last_name:
          type: string
          maxLength: 150
          description: "Фамилия"
          example: "Пупкин"
        middle_name:
          type: string
          maxLength: 150
          description: "Отчество"
          example: "Алибабаевич"
        address:
          type: string
          description: "Прописка"
        birthday:
          type: string
          description: "Дата рождения"
          example: "2009-06-06"
        email:
          type: string
          format: email
          maxLength: 254
          description: "Адрес электронной почты"
    required:
      - username
      - first_name
      - last_name
      - middle_name
      - address
      - birthday
      - email
      
    IntroductoryTasks:
      description:  'Решение вступительных задач'
      type: object
      properties:
        internship_id:
          type: integer
          description: "Уникальный id стажировки"
        tasks:
          type: array
          description: "Список задач"
          items:
            type: object
            properties:
              task_id:
                type: integer
                description: "Уникальный id задачи"
              solution:
                type: string
                description: "Текстовое описание решения или ссылка на онлайн ресурс с решением"
                example: "https://docs.google.com/document/u/0/"
      required:
        - tasks

    User:
      description:  'Текущий пользователь для отображения в ЛК'
      type: object
      properties:
        schema:
          $ref: '#/components/schemas/Candidate'
        role:
          type: string
          description: "Роль пользователя в системе"
          example: "Стажер"
      required:
        - username

    Intern:
      description:  'Полные данные стажера'
      type: object
      properties:
        schema:
          $ref: '#/components/schemas/Candidate'
        role:
          type: string
          description: "Роль пользователя в системе"
          example: "Стажер"
        mentors:
          type: array
          description: "Список соответствий стажировка - ментор для конкретного стажера"
          items:
            type: object
            properties:
              internship_id:
                type: integer
                description: "Уникальный id стажировки"
              mentor_id:
                type: integer
                description: "Уникальный id ментора"
      required:
        - username
    UserSearch:
      description:  'Пользователь из БД AD'
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        username:
          type: string
          description: "Уникальный юзернейм в виде номера телефона"
          pattern: ^(7+([0-9]){10})$
          maxLength: 15
        first_name:
          type: string
          maxLength: 150
          description: "Имя"
          example: "Вася"
        last_name:
          type: string
          maxLength: 150
          description: "Фамилия"
          example: "Пупкин"
        middle_name:
          type: string
          maxLength: 150
          description: "Отчество"
          example: "Алибабаевич"
      required:
        - username
    InternWithMentor:
      description: 'Расширенный объект пользователя с рецептами'
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        internship_id:
          type: integer
        mentor_id:
          type: integer

    Templates:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
          description: 'Уникальный id'
        count:
          type: integer
          description: 'Количество шаблонов'
        template:
          type: object
          properties:
            id:
              type: integer
              readOnly: true
              description: 'Уникальный id шаблона'
            count:
              type: integer
              description: 'Количество шаблонов'
            template:
              description: 'Список шаблонов'
              type: array
              items:
                  $ref: '#/components/schemas/TemplateList'
      required:
        - count
        - template

    TemplateList:
      type: object
      properties:
        template_id:
          type: integer
          description: 'Уникальный id шаблона'
        image_ling:
          type: string
          description: 'Ссылка на изобращение шаблона'
          example: "http://internship.example.org/static/example.jpg"
        text:
          description: 'Описание'
          type: string
      required:
        - count
        - template
        
    Template:
      type: object
      properties:
        template_id:
          type: integer
          description: 'Уникальный id шаблона'
        html:
          type: string
          description: 'HTML верстка страницы'
          example: "<div class=\"form\" >foo-bar</div>"
        css-libs:
          type: string
          description: 'Стиль CSS страницы'
          example: "test-forms-1.0.css"
        js-libs:
          type: string
          description: 'Скрипт JS для HTML страницы'
          example: "test-forms-1.0.js"
      required:
        - count
        - template


    AnnouncementsCreate:
      type: object
      properties:
        projectid:
          type: integer
        title:
          type: string
          description: 'Заголовок'
          example: 'Стажировка по системной аналитике'
        blocks:
          type: array
          items:
            type: object
            properties:
              sorts[0]:
                type: object
                description: 'Блок с определенным порядком'
                properties:
                  block_id: 
                    type: string
                    description: 'Уникальный идентификатор блока'
                    example: '668483038'
                  changes:
                    type: array
                    description: 'Список всех изменений элементов блока'
                    items:
                      type: object
                      properties:
                        only_this_field: 
                          type: string
                          description: 'Уникальный идентификатор элемента блока'
                          example: 'title'
                        block_info:
                          type: string
                          description: 'Текст элемента'
                          example: 'Заголовок формы'
              sorts[1]:
                type: object
                description: 'Блок с определенным порядком'
                properties:
                  block_id: 
                    type: string
                    description: 'Уникальный идентификатор блока'
                    example: '668482970'
                  changes:
                    type: array
                    description: 'Список всех изменений элементов блока'
                    items:
                      type: object
                      properties:
                        only_this_field: 
                          type: string
                          description: 'Уникальный идентификатор элемента блока'
                          example: 'li_title_1'
                        block_info:
                          type: string
                          description: 'Текст элемента'
                          example: 'E-mail'
      required:
        - projectid
        - title
        - blocks
        
    AnnouncementsResponseOnCreate:
      type: object
      properties:
        projectid:
          type: integer
        link:
          type: string
          description: 'Ссылка на лендинг'
          example: 'http://internship.example.org/api/announcements/123/'
        publish_onepage:
          type: boolean
          description: 'Страница уже опубликована в открытом доступе?'
          example: 'yes'
      required:
        - projectid
        - link
        - publish_onepage

    RecipeMinified:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
          description: 'Уникальный id'
        name:
          type: string
          maxLength: 200
          description: 'Название'
        image:
          description: 'Ссылка на картинку на сайте'
          example: 'http://foodgram.example.org/media/recipes/images/image.jpeg'
          type: string
          format: url
        cooking_time:
          description: 'Время приготовления (в минутах)'
          type: integer
          minimum: 1
    Ingredient:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 200
          example: 'Капуста'
        measurement_unit:
          type: string
          maxLength: 200
          example: 'кг'
      required:
        - name
        - measurement_unit
    IngredientInRecipe:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 200
          description: 'Название'
          example: 'Картофель отварной'
        measurement_unit:
          type: string
          maxLength: 200
          description: 'Единицы измерения'
          example: 'г'
        amount:
          type: integer
          description: 'Количество'
          minimum: 1

      required:
        - name
        - measurement_unit
    CustomUserCreate:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        username:
          type: string
          description: "Уникальный юзернейм в виде номера телефона"
          pattern: ^(7+([0-9]){10})$
          maxLength: 15
          example: "79000000000"
      required:
        - username
    CustomUserResponseOnCreate:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        username:
          type: string
          description: "Уникальный юзернейм"
          pattern: ^[\w.@+-]+\z
          maxLength: 150
          example: "79000000000"
      required:
        - username
    Activation:
      type: object
      properties:
        uid:
          type: string
        token:
          type: string
      required:
        - uid
        - token
    SendEmailReset:
      type: object
      properties:
        email:
          type: string
          format: email
      required:
        - email
    PasswordResetConfirm:
      type: object
      properties:
        uid:
          type: string
        token:
          type: string
        new_password:
          type: string
      required:
        - uid
        - token
        - new_password
    UsernameResetConfirm:
      type: object
      properties:
        new_email:
          type: string
          format: email
          maxLength: 254
    SetPassword:
      type: object
      properties:
        new_password:
          type: string
        current_password:
          type: string
      required:
        - new_password
        - current_password
    SetUsername:
      type: object
      properties:
        current_password:
          type: string
        new_email:
          type: string
          format: email
          maxLength: 254
      required:
        - current_password
    TokenCreate:
      type: object
      properties:
        password:
          type: string
        email:
          type: string
    TokenGetResponse:
      type: object
      properties:
        auth_token:
          type: string
    RecipeCreateUpdate:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        ingredients:
          description: Список ингредиентов
          type: array
          items:
            example:
              id: 1123
              amount: 10
            type: object
            properties:
              id:
                description: 'Уникальный id'
                type: integer
              amount:
                description: 'Количество в рецепте'
                type: integer
            required:
              - id
              - amount
        tags:
          description: 'Список id тегов'
          type: array
          example: [1, 2]
          items:
            type: integer
        image:
          description: 'Картинка, закодированная в Base64'
          example: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAgMAAABieywaAAAACVBMVEUAAAD///9fX1/S0ecCAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNoAAAAggCByxOyYQAAAABJRU5ErkJggg=='
          type: string
          format: binary
        name:
          description: 'Название'
          type: string
          maxLength: 200
        text:
          description: 'Описание'
          type: string
        cooking_time:
          description: 'Время приготовления (в минутах)'
          type: integer
          minimum: 1
      required:
        - ingredients
        - tags
        - image
        - name
        - text
        - cooking_time

    ValidationError:
      description: Стандартные ошибки валидации JSF
      type: object
      properties:
        username:
          description: 'Название поля, в котором произошли ошибки. Таких полей может быть несколько'
          example: [ 'Обязательное поле.' ]
          type: array
          items:
            type: string
    NestedValidationError:
      description: Стандартные ошибки валидации JSF
      type: object
      properties:
        ingredients:
          description: 'Ошибки в ингредиентах. В приведенном примере в первом и третьем ингредиенте не было ошибок (amount >= 1), а во втором были.'
          example: [{},{"amount":["Убедитесь, что это значение больше либо равно 1."]}, {}]
          type: array
          items:
            type: object
            properties:
              amount:
                type: array
                items:
                  type: string

    SelfMadeError:
      description: Ошибка
      type: object
      properties:
        errors:
          description: 'Описание ошибки'
          type: string

    AuthenticationError:
      description: Пользователь не авторизован
      type: object
      properties:
        detail:
          description: 'Описание ошибки'
          example: "Учетные данные не были предоставлены."
          type: string

    PermissionDenied:
      description: Недостаточно прав
      type: object
      properties:
        detail:
          description: 'Описание ошибки'
          example: "У вас недостаточно прав для выполнения данного действия."
          type: string
    NotFound:
      description: Объект не найден
      type: object
      properties:
        detail:
          description: 'Описание ошибки'
          example: "Страница не найдена."
          type: string
    
    ConflictError:
      description: Данный ресурс уже существует
      type: object
      properties:
        detail:
          description: 'Описание ошибки'
          example: "Вы уже отправляли запрос."
          type: string

  responses:
  
    ValidationError:
      description: 'Ошибки валидации в стандартном формате JSF'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ValidationError'

    ConflictError:
      description: 'Даннный объект уже существует'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ConflictError'

    AnnouncementsValidationError:
      description: 'Данный запрос не может быть обработан'
      content:
        application/json:
          schema:
            description: Стандартные ошибки валидации JSF
            type: object
            properties:
              block:
                description: 'Название поля, в котором произошли ошибки. Таких полей может быть несколько'
                example: [ 'Блок "form" с id "668483038" содержит недопустимые значения' ]
                type: array
                items:
                  type: string
            
    NestedValidationError:
      description: 'Ошибки валидации в стандартном формате JSF, в том числе с внутренними элементами.'
      content:
        application/json:
          schema:
            oneOf:
              - $ref: '#/components/schemas/NestedValidationError'
              - $ref: '#/components/schemas/ValidationError'
    
    AuthenticationError:
      description: Пользователь не авторизован
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AuthenticationError'

    PermissionDenied:
      description: Недостаточно прав
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionDenied'

    NotFound:
      description: Объект не найден
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NotFound'


  securitySchemes:
    Token:
      description: 'Авторизация по токену. <br> Все запросы от имени пользователя должны выполняться с заголовком "Authorization: Token TOKENVALUE"'
      type: http
      scheme: bearer
      bearerFormat: JWT
      scopes:
        admin: Admin scope
        user: User scope
